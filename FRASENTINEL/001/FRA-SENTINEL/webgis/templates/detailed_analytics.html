{% extends "base.html" %}

{% block title %}{% trans %}FRA Sentinel - Detailed Analytics{% endtrans %}{% endblock %}

{% block extra_css %}
<style>
    .analytics-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        background: linear-gradient(135deg, #f8fffe 0%, #e8f5f0 100%);
        min-height: 100vh;
    }

    .analytics-header {
        background: linear-gradient(135deg, #0d4f3c 0%, #1a5f4a 100%);
        color: white;
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 8px 32px rgba(13, 79, 60, 0.3);
        position: relative;
        overflow: hidden;
    }

    .analytics-header::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(180deg); }
    }

    .analytics-header h1 {
        margin: 0;
        font-size: 2.5rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        gap: 15px;
        position: relative;
        z-index: 1;
    }

    .analytics-header p {
        margin: 10px 0 0 0;
        opacity: 0.9;
        font-size: 1.1rem;
        position: relative;
        z-index: 1;
    }

    .analytics-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin-bottom: 30px;
    }

    .analytics-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        border: 1px solid #e0e0e0;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .analytics-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #0d4f3c, #28a745, #20c997);
        transform: scaleX(0);
        transition: transform 0.3s ease;
    }

    .analytics-card:hover::before {
        transform: scaleX(1);
    }

    .analytics-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    }

    .analytics-card h2 {
        margin: 0 0 20px 0;
        color: #0d4f3c;
        font-size: 1.4rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .data-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 15px 0;
        padding: 12px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 10px;
        border-left: 4px solid #0d4f3c;
        transition: all 0.3s ease;
    }

    .data-item:hover {
        transform: translateX(5px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .data-label {
        font-weight: 600;
        color: #0d4f3c;
        font-size: 0.9rem;
    }

    .data-value {
        font-weight: 700;
        color: #28a745;
        font-size: 1.1rem;
    }

    .progress-container {
        width: 100%;
        background: #e0e0e0;
        border-radius: 10px;
        overflow: hidden;
        margin: 10px 0;
        height: 8px;
    }

    .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #28a745 0%, #20c997 100%);
        border-radius: 10px;
        transition: width 1s ease-in-out;
        position: relative;
    }

    .progress-bar::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
    }

    .chart-container {
        height: 200px;
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 20px 0;
        position: relative;
        overflow: hidden;
    }

    .chart-container::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="%23e0e0e0" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
        opacity: 0.3;
    }

    .pie-chart {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        background: conic-gradient(
            #28a745 0deg 245deg,
            #20c997 245deg 320deg,
            #ffc107 320deg 360deg
        );
        position: relative;
        z-index: 1;
    }

    .pie-chart::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 60px;
        height: 60px;
        background: white;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }

    .metric-card {
        background: linear-gradient(135deg, #0d4f3c 0%, #1a5f4a 100%);
        color: white;
        padding: 12px;
        border-radius: 10px;
        text-align: center;
        margin: 8px 0;
        position: relative;
        overflow: hidden;
        max-width: 200px;
    }

    .metric-card::before {
        content: '';
        position: absolute;
        top: -50%;
        right: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
        animation: pulse 3s ease-in-out infinite;
    }

    @keyframes pulse {
        0%, 100% { transform: scale(1); opacity: 0.5; }
        50% { transform: scale(1.1); opacity: 0.8; }
    }

    .metric-value {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 3px;
        position: relative;
        z-index: 1;
    }

    .metric-label {
        font-size: 0.8rem;
        opacity: 0.9;
        position: relative;
        z-index: 1;
    }

    .full-width-card {
        grid-column: 1 / -1;
    }

    .data-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .data-table th,
    .data-table td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #e0e0e0;
    }

    .data-table th {
        background: linear-gradient(135deg, #0d4f3c 0%, #1a5f4a 100%);
        color: white;
        font-weight: 600;
        font-size: 0.9rem;
    }

    .data-table tr:hover {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        transform: scale(1.01);
        transition: all 0.3s ease;
    }

    .back-button {
        background: linear-gradient(135deg, #0d4f3c 0%, #1a5f4a 100%);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 20px;
        position: relative;
        overflow: hidden;
    }

    .back-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.5s ease;
    }

    .back-button:hover::before {
        left: 100%;
    }

    .back-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(13, 79, 60, 0.3);
    }

    .status-good {
        color: #28a745;
        font-weight: 600;
        background: rgba(40, 167, 69, 0.1);
        padding: 4px 8px;
        border-radius: 6px;
    }

    .status-warning {
        color: #ffc107;
        font-weight: 600;
        background: rgba(255, 193, 7, 0.1);
        padding: 4px 8px;
        border-radius: 6px;
    }

    .status-neutral {
        color: #6c757d;
        font-weight: 600;
        background: rgba(108, 117, 125, 0.1);
        padding: 4px 8px;
        border-radius: 6px;
    }

    .visual-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
    }

    .visual-item {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        padding: 20px;
        border-radius: 15px;
        text-align: center;
        border: 2px solid transparent;
        transition: all 0.3s ease;
    }

    .visual-item:hover {
        border-color: #0d4f3c;
        transform: scale(1.02);
    }

    .visual-icon {
        font-size: 3rem;
        margin-bottom: 10px;
        display: block;
    }

    .visual-value {
        font-size: 1.5rem;
        font-weight: 700;
        color: #0d4f3c;
        margin-bottom: 5px;
    }

    .visual-label {
        font-size: 0.9rem;
        color: #666;
    }
</style>
{% endblock %}

{% block content %}
<div class="analytics-container">
    <!-- Back Button -->
    <button class="back-button" onclick="window.location.href='{{ url_for('dashboard') }}'">
        â† {% trans %}Back to Dashboard{% endtrans %}
    </button>

    <div class="analytics-header">
        <h1 id="analytics-page-title">ğŸ“Š {% trans %}Detailed Analytics{% endtrans %}</h1>
        <p id="analytics-page-description">{% trans %}Real-time satellite imagery analysis and IoT sensor data for forest rights monitoring.{% endtrans %}</p>
    </div>

    <div class="analytics-grid">
        <!-- Satellite Land Classification -->
        <div class="analytics-card">
            <h2 id="land-use-analysis-title">ğŸ›°ï¸ {% trans %}Satellite Land Classification{% endtrans %}</h2>
            
            <!-- Visual Chart -->
            <div class="chart-container">
                <div class="pie-chart"></div>
            </div>
            
            <!-- Visual Grid -->
            <div class="visual-grid">
                <div class="visual-item">
                    <span class="visual-icon">ğŸŒ²</span>
                    <div class="visual-value">68.2%</div>
                    <div class="visual-label">{% trans %}Forest Cover{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸŒ¾</span>
                    <div class="visual-value">18.7%</div>
                    <div class="visual-label">{% trans %}Crop Land{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸ˜ï¸</span>
                    <div class="visual-value">8.3%</div>
                    <div class="visual-label">{% trans %}Built-up Area{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸ’§</span>
                    <div class="visual-value">4.8%</div>
                    <div class="visual-label">{% trans %}Water Bodies{% endtrans %}</div>
                </div>
            </div>
            
            <!-- Progress Bars -->
            <div class="data-item">
                <span class="data-label">{% trans %}NDVI Index{% endtrans %}</span>
                <span class="data-value">0.68</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 68%"></div>
            </div>
            
            <div class="data-item">
                <span class="data-label">{% trans %}Vegetation Density{% endtrans %}</span>
                <span class="data-value">High</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 85%"></div>
            </div>
        </div>

        <!-- Satellite Water Detection -->
        <div class="analytics-card">
            <h2 id="water-content-analysis-title">ğŸ’§ {% trans %}Satellite Water Detection{% endtrans %}</h2>
            
            <!-- Metric Cards -->
            <div class="metric-card">
                <div class="metric-value">4.8%</div>
                <div class="metric-label">{% trans %}Surface Water Coverage{% endtrans %}</div>
            </div>
            
            <!-- Visual Grid -->
            <div class="visual-grid">
                <div class="visual-item">
                    <span class="visual-icon">ğŸŒŠ</span>
                    <div class="visual-value">4.8%</div>
                    <div class="visual-label">{% trans %}Surface Water{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸ’§</span>
                    <div class="visual-value">0.24</div>
                    <div class="visual-label">{% trans %}NDWI Index{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸŒ§ï¸</span>
                    <div class="visual-value">1,450mm</div>
                    <div class="visual-label">{% trans %}Precipitation{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">â˜ï¸</span>
                    <div class="visual-value">65%</div>
                    <div class="visual-label">{% trans %}Cloud Cover{% endtrans %}</div>
                </div>
            </div>
            
            <!-- Progress Bars -->
            <div class="data-item">
                <span class="data-label">{% trans %}NDWI Index{% endtrans %}</span>
                <span class="data-value">0.24</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 24%"></div>
            </div>
            
            <div class="data-item">
                <span class="data-label">{% trans %}Water Body Count{% endtrans %}</span>
                <span class="data-value">12</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 60%"></div>
            </div>
        </div>

        <!-- IoT Environmental Sensors -->
        <div class="analytics-card">
            <h2 id="environmental-data-title">ğŸŒ¡ï¸ {% trans %}IoT Environmental Sensors{% endtrans %}</h2>
            
            <!-- Metric Cards -->
            <div class="metric-card">
                <div class="metric-value">26.5Â°C</div>
                <div class="metric-label">{% trans %}Air Temperature{% endtrans %}</div>
            </div>
            
            <!-- Visual Grid -->
            <div class="visual-grid">
                <div class="visual-item">
                    <span class="visual-icon">ğŸŒ¡ï¸</span>
                    <div class="visual-value">26.5Â°C</div>
                    <div class="visual-label">{% trans %}Temperature{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸ’¨</span>
                    <div class="visual-value">72%</div>
                    <div class="visual-label">{% trans %}Humidity{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸŒªï¸</span>
                    <div class="visual-value">8.5 km/h</div>
                    <div class="visual-label">{% trans %}Wind Speed{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">â˜€ï¸</span>
                    <div class="visual-value">850 W/mÂ²</div>
                    <div class="visual-label">{% trans %}Solar Radiation{% endtrans %}</div>
                </div>
            </div>
            
            <!-- Progress Bars -->
            <div class="data-item">
                <span class="data-label">{% trans %}Air Pressure{% endtrans %}</span>
                <span class="data-value">1013.25 hPa</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 75%"></div>
            </div>
            
            <div class="data-item">
                <span class="data-label">{% trans %}UV Index{% endtrans %}</span>
                <span class="data-value">6.2</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 62%"></div>
            </div>
        </div>

        <!-- IoT Soil Sensors -->
        <div class="analytics-card">
            <h2 id="soil-analysis-title">ğŸŒ± {% trans %}IoT Soil Sensors{% endtrans %}</h2>
            
            <!-- Metric Cards -->
            <div class="metric-card">
                <div class="metric-value">28%</div>
                <div class="metric-label">{% trans %}Soil Moisture{% endtrans %}</div>
            </div>
            
            <!-- Visual Grid -->
            <div class="visual-grid">
                <div class="visual-item">
                    <span class="visual-icon">ğŸ’§</span>
                    <div class="visual-value">28%</div>
                    <div class="visual-label">{% trans %}Soil Moisture{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸŒ¡ï¸</span>
                    <div class="visual-value">24.2Â°C</div>
                    <div class="visual-label">{% trans %}Soil Temperature{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">âš¡</span>
                    <div class="visual-value">0.15 mS/cm</div>
                    <div class="visual-label">{% trans %}EC Level{% endtrans %}</div>
                </div>
                <div class="visual-item">
                    <span class="visual-icon">ğŸ§ª</span>
                    <div class="visual-value">6.8</div>
                    <div class="visual-label">{% trans %}Soil pH{% endtrans %}</div>
                </div>
            </div>
            
            <!-- Progress Bars -->
            <div class="data-item">
                <span class="data-label">{% trans %}Soil Moisture Level{% endtrans %}</span>
                <span class="data-value">28%</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 28%"></div>
            </div>
            
            <div class="data-item">
                <span class="data-label">{% trans %}Soil Temperature{% endtrans %}</span>
                <span class="data-value">24.2Â°C</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 60%"></div>
            </div>
            
            <div class="data-item">
                <span class="data-label">{% trans %}Sensor Battery{% endtrans %}</span>
                <span class="data-value">87%</span>
            </div>
            <div class="progress-container">
                <div class="progress-bar" style="width: 87%"></div>
            </div>
        </div>
    </div>

    <!-- Detailed Data Table -->
    <div class="analytics-card full-width-card">
        <h2 id="detailed-data-table-title">ğŸ“‹ {% trans %}Detailed Data Table{% endtrans %}</h2>
        <table class="data-table">
            <thead>
                <tr>
                    <th>{% trans %}Parameter{% endtrans %}</th>
                    <th>{% trans %}Value{% endtrans %}</th>
                    <th>{% trans %}Unit{% endtrans %}</th>
                    <th>{% trans %}Status{% endtrans %}</th>
                    <th>{% trans %}Trend{% endtrans %}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{% trans %}NDVI Index{% endtrans %}</td>
                    <td>0.68</td>
                    <td>Index</td>
                    <td class="status-good">{% trans %}High Vegetation{% endtrans %}</td>
                    <td>ğŸŒ²</td>
                </tr>
                <tr>
                    <td>{% trans %}NDWI Index{% endtrans %}</td>
                    <td>0.24</td>
                    <td>Index</td>
                    <td class="status-good">{% trans %}Water Present{% endtrans %}</td>
                    <td>ğŸ’§</td>
                </tr>
                <tr>
                    <td>{% trans %}Forest Cover{% endtrans %}</td>
                    <td>68.2</td>
                    <td>%</td>
                    <td class="status-good">{% trans %}Dense{% endtrans %}</td>
                    <td>ğŸŒ²</td>
                </tr>
                <tr>
                    <td>{% trans %}Crop Land{% endtrans %}</td>
                    <td>18.7</td>
                    <td>%</td>
                    <td class="status-good">{% trans %}Active{% endtrans %}</td>
                    <td>ğŸŒ¾</td>
                </tr>
                <tr>
                    <td>{% trans %}Built-up Area{% endtrans %}</td>
                    <td>8.3</td>
                    <td>%</td>
                    <td class="status-neutral">{% trans %}Stable{% endtrans %}</td>
                    <td>ğŸ˜ï¸</td>
                </tr>
                <tr>
                    <td>{% trans %}Surface Water{% endtrans %}</td>
                    <td>4.8</td>
                    <td>%</td>
                    <td class="status-good">{% trans %}Detected{% endtrans %}</td>
                    <td>ğŸŒŠ</td>
                </tr>
                <tr>
                    <td>{% trans %}Soil Moisture{% endtrans %}</td>
                    <td>28</td>
                    <td>%</td>
                    <td class="status-good">{% trans %}Optimal{% endtrans %}</td>
                    <td>ğŸ’§</td>
                </tr>
                <tr>
                    <td>{% trans %}Soil Temperature{% endtrans %}</td>
                    <td>24.2</td>
                    <td>Â°C</td>
                    <td class="status-good">{% trans %}Normal{% endtrans %}</td>
                    <td>ğŸŒ¡ï¸</td>
                </tr>
                <tr>
                    <td>{% trans %}Soil pH{% endtrans %}</td>
                    <td>6.8</td>
                    <td>pH</td>
                    <td class="status-good">{% trans %}Optimal{% endtrans %}</td>
                    <td>ğŸ§ª</td>
                </tr>
                <tr>
                    <td>{% trans %}Soil EC{% endtrans %}</td>
                    <td>0.15</td>
                    <td>mS/cm</td>
                    <td class="status-good">{% trans %}Low{% endtrans %}</td>
                    <td>âš¡</td>
                </tr>
                <tr>
                    <td>{% trans %}Air Temperature{% endtrans %}</td>
                    <td>26.5</td>
                    <td>Â°C</td>
                    <td class="status-good">{% trans %}Normal{% endtrans %}</td>
                    <td>ğŸŒ¡ï¸</td>
                </tr>
                <tr>
                    <td>{% trans %}Humidity{% endtrans %}</td>
                    <td>72</td>
                    <td>%</td>
                    <td class="status-good">{% trans %}High{% endtrans %}</td>
                    <td>ğŸ’¨</td>
                </tr>
                <tr>
                    <td>{% trans %}Wind Speed{% endtrans %}</td>
                    <td>8.5</td>
                    <td>km/h</td>
                    <td class="status-good">{% trans %}Moderate{% endtrans %}</td>
                    <td>ğŸŒªï¸</td>
                </tr>
                <tr>
                    <td>{% trans %}Solar Radiation{% endtrans %}</td>
                    <td>850</td>
                    <td>W/mÂ²</td>
                    <td class="status-good">{% trans %}High{% endtrans %}</td>
                    <td>â˜€ï¸</td>
                </tr>
                <tr>
                    <td>{% trans %}Sensor Battery{% endtrans %}</td>
                    <td>87</td>
                    <td>%</td>
                    <td class="status-good">{% trans %}Good{% endtrans %}</td>
                    <td>ğŸ”‹</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<script>
    // Initialize animations and interactions
    document.addEventListener('DOMContentLoaded', function() {
        console.log('ğŸ¨ Initializing Enhanced Analytics Page...');
        
        // Animate progress bars on page load
        setTimeout(() => {
            animateProgressBars();
        }, 500);
        
        // Add hover effects to visual items
        addHoverEffects();
        
        // Animate metric cards
        animateMetricCards();
        
        console.log('âœ… Enhanced analytics page initialized');
    });

    function animateProgressBars() {
        const progressBars = document.querySelectorAll('.progress-bar');
        progressBars.forEach((bar, index) => {
            setTimeout(() => {
                const width = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = width;
                }, 100);
            }, index * 200);
        });
    }

    function addHoverEffects() {
        const visualItems = document.querySelectorAll('.visual-item');
        visualItems.forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'scale(1.05) rotate(2deg)';
                this.style.boxShadow = '0 8px 25px rgba(13, 79, 60, 0.2)';
            });
            
            item.addEventListener('mouseleave', function() {
                this.style.transform = 'scale(1) rotate(0deg)';
                this.style.boxShadow = 'none';
            });
        });
    }

    function animateMetricCards() {
        const metricCards = document.querySelectorAll('.metric-card');
        metricCards.forEach((card, index) => {
            setTimeout(() => {
                card.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    card.style.transform = 'scale(1)';
                }, 200);
            }, index * 300);
        });
    }

    // Add click interactions to data items
    document.addEventListener('click', function(e) {
        if (e.target.closest('.data-item')) {
            const dataItem = e.target.closest('.data-item');
            dataItem.style.background = 'linear-gradient(135deg, #e8f5f0 0%, #d4edda 100%)';
            setTimeout(() => {
                dataItem.style.background = 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)';
            }, 1000);
        }
    });

    // Add pulse animation to pie chart
    function animatePieChart() {
        const pieChart = document.querySelector('.pie-chart');
        if (pieChart) {
            setInterval(() => {
                pieChart.style.transform = 'scale(1.1)';
                setTimeout(() => {
                    pieChart.style.transform = 'scale(1)';
                }, 500);
            }, 3000);
        }
    }

    // Start pie chart animation after page load
    setTimeout(animatePieChart, 1000);
</script>

{% endblock %}
